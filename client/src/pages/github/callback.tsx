import { useEffect } from "react";
import { useRouter } from 'next/router';

import { useAuth }  from "../../context/AuthContext";

export default function GithubCallback() {
  const { query } = useRouter();
  const { signIn } = useAuth();

  useEffect(() => {
    const { code } = query;
    
    if(code) {
      signIn('github', { code: String(code) });
    }
  }, [query]);

  return (
    <div className="flex flex-col items-center justify-center h-screen bg-black text-white">
      <svg viewBox="0 0 363 354" width="150" height="150" fill="white" className="animate-bounce-slow">
        <path d="M181.83 0.34C81.79 0.34 0.66 81.44 0.66 181.5C0.66 261.54 52.57 329.45 124.55 353.4C133.61 355.08 136.93 349.47 136.93 344.69C136.93 340.37 136.76 326.1 136.69 310.96C103.09 318.27 82.74 311.14 75.65 289.58C70.16 275.63 63.45 266.79 55.54 263.08C44.58 255.58 44.99 251.91 56.78 252.06C68.9 252.92 78.16 259.14 84.55 270.73C100.7 298.43 126.93 290.42 137.27 285.79C138.89 274.09 143.59 266.09 148.77 261.57C108.53 256.99 66.23 241.45 66.23 172.04C66.23 152.26 73.31 136.1 84.89 123.41C83.01 118.84 76.81 100.42 86.65 75.46C96.79 72.22 113.4 78.41 136.48 94.04C150.93 90.02 166.43 88.01 181.83 87.94C197.22 88.01 212.73 90.02 227.21 94.04C250.26 78.41 266.85 72.22 276.98 75.46C286.84 100.42 280.64 118.84 278.76 123.41C290.37 136.1 297.4 152.26 297.4 172.04C297.4 241.62 255.02 256.94 214.68 261.42C221.18 267.05 226.97 278.07 226.97 294.97C226.97 319.21 226.76 338.72 226.76 344.69C226.76 349.51 230.02 355.16 239.2 353.38C311.15 329.4 362.99 261.51 362.99 181.5C362.99 81.44 281.88 0.34 181.83 0.34Z"/>
        <path d="M69.28 260.45C68.88 261.35 67.46 261.62 66.17 261C64.86 260.41 64.12 259.18 64.55 258.28C64.94 257.35 66.36 257.09 67.67 257.71C68.98 258.3 69.73 259.54 69.28 260.45Z"/>
        <path d="M76.62 268.63C75.75 269.43 74.06 269.06 72.92 267.79C71.73 266.53 71.51 264.84 72.39 264.03C73.28 263.23 74.92 263.6 76.1 264.87C77.29 266.14 77.52 267.82 76.62 268.63Z"/>
        <path d="M83.76 279.06C82.65 279.84 80.83 279.11 79.71 277.5C78.6 275.89 78.6 273.96 79.74 273.18C80.86 272.41 82.65 273.11 83.79 274.7C84.89 276.34 84.89 278.28 83.76 279.06Z"/>
        <path d="M93.55 289.14C92.55 290.24 90.44 289.94 88.89 288.45C87.31 286.99 86.87 284.92 87.86 283.82C88.87 282.73 90.99 283.03 92.55 284.52C94.13 285.97 94.6 288.06 93.55 289.14Z"/>
        <path d="M107.05 295C106.61 296.42 104.57 297.06 102.52 296.46C100.47 295.84 99.13 294.17 99.54 292.74C99.97 291.31 102.02 290.64 104.08 291.29C106.13 291.9 107.47 293.55 107.05 295Z"/>
        <path d="M121.87 296.08C121.92 297.58 120.18 298.82 118.03 298.84C115.86 298.89 114.11 297.68 114.09 296.21C114.09 294.7 115.79 293.48 117.95 293.44C120.11 293.4 121.87 294.6 121.87 296.08Z"/>
        <path d="M135.67 293.74C135.93 295.19 134.43 296.69 132.29 297.09C130.19 297.47 128.24 296.57 127.97 295.13C127.71 293.63 129.24 292.14 131.34 291.75C133.48 291.38 135.4 292.25 135.67 293.74Z"/>
      </svg>

      <h1 className="mt-5 text-2xl font-medium text-white tracking-wider">Carregando...</h1>
    </div>
  )
}